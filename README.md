# Steam Download Monitor

Python скрипт для мониторинга скорости загрузки игр в Steam с автоматическим определением места установки лаунчера.

## Возможности

-  Автоматическое определение пути установки Steam через реестр Windows
-  Считывание скорости загрузки игр
-  Вывод информации каждую 1 минуту на протяжении 5 минут
-  Отслеживание статуса загрузки (активная/пауза)
-  Отображение названия загружаемой игры
-  Работает независимо от места установки Steam
-  Поддержка множественных библиотек Steam

## Требования

- **OS**: Windows 10/11
- **Python**: 3.7+
- **Зависимости**: Только стандартные библиотеки Python (winreg, os, time, re, pathlib)

## Установка

1. Клонируйте репозиторий или скачайте файлы:
```bash
git clone <your-repo-url>
cd steam-download-monitor
```

2. Убедитесь, что Python установлен:
```bash
python --version
```

## Использование

### Базовое использование

Запустите скрипт:
```bash
python steam_download_monitor.py
```

Скрипт будет:
- Автоматически найдет Steam через реестр Windows
- Мониторить загрузки каждые 60 секунд
- Работать в течение 5 минут
- Выводить информацию о скорости, названии игры и статусе

### Альтернативная версия

Если основная версия не работает, попробуйте альтернативную:
```bash
python steam_download_monitor_v2.py
```

Эта версия использует другой метод определения загрузок (мониторинг файловой системы).

## Пример вывода

```
======================================================================
МОНИТОРИНГ ЗАГРУЗОК STEAM
======================================================================
Путь к Steam: C:/Program Files (x86)/Steam
Путь к логам: C:/Program Files (x86)/Steam/logs/content_log.txt
Длительность: 5 минут
Интервал проверки: 60 секунд
======================================================================

[14:30:15] Проверка #1
----------------------------------------------------------------------
 Игра: Cyberpunk 2077
 Скорость: 45.32 MB/s (362.56 Mbps)
✓ Статус: Загрузка
----------------------------------------------------------------------

[14:31:15] Проверка #2
----------------------------------------------------------------------
  Игра: Cyberpunk 2077
 Скорость: 0.00 MB/s
⏸  Статус: Пауза
----------------------------------------------------------------------
```

## Как это работает

### 1. Определение пути Steam
Скрипт проверяет следующие ключи реестра Windows:
- `HKEY_CURRENT_USER\Software\Valve\Steam`
- `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Valve\Steam`
- `HKEY_LOCAL_MACHINE\SOFTWARE\Valve\Steam`

### 2. Методы мониторинга

#### Версия 1 (steam_download_monitor.py)
- Читает логи Steam из `logs/content_log.txt`
- Парсит записи о скорости загрузки
- Определяет статус по ключевым словам (paused, suspended)

#### Версия 2 (steam_download_monitor_v2.py)
- Мониторит папки `steamapps/downloading/`
- Отслеживает изменения размера файлов
- Вычисляет скорость по изменению размера во времени
- Проверяет время последней модификации файлов для определения паузы

### 3. Получение названий игр
- Читает файлы `appmanifest_<AppID>.acf`
- Извлекает название игры из поля "name"
- Поддерживает множественные библиотеки Steam

## Настройка параметров

Вы можете изменить параметры мониторинга в коде:

```python
# В функции main()
monitor.monitor(
    duration_minutes=5,  # Общая длительность мониторинга
    interval_seconds=60  # Интервал между проверками
)
```

Примеры:
- Мониторинг 10 минут с проверкой каждые 30 секунд:
  ```python
  monitor.monitor(duration_minutes=10, interval_seconds=30)
  ```

- Мониторинг 1 час с проверкой каждые 5 минут:
  ```python
  monitor.monitor(duration_minutes=60, interval_seconds=300)
  ```

## Решение проблем

### Steam не найден
**Проблема**: `✗ Steam не найден в реестре`

**Решение**:
1. Убедитесь, что Steam установлен
2. Проверьте, что Steam запущен хотя бы один раз
3. Проверьте права доступа к реестру

### Нет данных о загрузках
**Проблема**: ` Нет активных загрузок` постоянно

**Решение**:
1. Убедитесь, что в Steam действительно идет загрузка
2. Попробуйте альтернативную версию скрипта (v2)
3. Проверьте, что у Python есть права на чтение логов Steam

### Некорректная скорость
**Проблема**: Скорость показывает 0 или неверные значения

**Решение**:
1. Подождите 1-2 цикла проверки для точных данных
2. Версия 2 вычисляет скорость по изменению файлов, нужно время
3. Убедитесь, что загрузка не на паузе

## Структура проекта

```
steam-download-monitor/
│
├── steam_download_monitor.py      # Основная версия (мониторинг логов)
├── steam_download_monitor_v2.py   # Альтернативная версия (мониторинг файлов)
├── README.md                       # Документация
├── requirements.txt               # Зависимости (пустой, только stdlib)
└── LICENSE                        # Лицензия
```

## Безопасность

- Скрипт только читает данные, не модифицирует файлы Steam
- Не требует прав администратора
- Не собирает и не отправляет данные
- Работает локально на вашем компьютере

## Лицензия

MIT License - свободное использование, модификация и распространение.

## Вклад

Если вы нашли баг или хотите предложить улучшение:
1. Создайте Issue с описанием проблемы
2. Или сделайте Pull Request с вашими изменениями

## Поддержка

Если у вас возникли вопросы или проблемы:
1. Проверьте раздел "Решение проблем"
2. Создайте Issue с детальным описанием проблемы
3. Приложите вывод скрипта и информацию о системе

## История версий

### v2.0 (2025-01-28)
- Добавлена альтернативная версия с мониторингом файловой системы
- Улучшено определение пути Steam
- Добавлена поддержка множественных библиотек Steam
- Улучшено форматирование вывода

### v1.0 (2025-01-28)
- Первая версия
- Мониторинг через логи Steam
- Автоматическое определение пути Steam
- Базовый функционал отслеживания загрузок
